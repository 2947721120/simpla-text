<link rel="import" href="../polymer/polymer.html">
<style media="screen">
  simpla-text[contenteditable] {
    outline: none;
  }
</style>
<script>
  import editor from './behaviors/editor-connector';
  import inlineBlock from './behaviors/inline-block';
  import simpla from './behaviors/simpla-connector';

  class SimplaText {
    beforeRegister() {
      this.is = 'simpla-text';

      this.properties = {
        editing: {
          type: Boolean,
          readOnly: true,
          value: false
        },

        editable: {
          type: Boolean,
          reflectToAttribute: true
        },

        plaintext: {
          type: Boolean,
          value: false
        }
      };

      this.listeners = {
        'tap': '_handleTap',
        'blur': '_handleBlur',
        'focus': '_handleFocus'
      };
    }

    get behaviors() {
      return [ editor, inlineBlock, simpla ];
    }

    _handleBlur() {
      this._setEditing(false);
    }

    _handleFocus() {
      if (this.editable) {
        this._setEditing(true);
      }
    }

    _handleTap() {
      if (this.editable) {
        this._setEditing(true);
      }
    }

    _editableObserver(editable) {
      if (!editable) {
        this._setEditing(false);
      }
    }

    get value() {
      return this.innerHTML;
    }

    set value(value) {
      this.innerHTML = value;
    }
  };

  Polymer(SimplaText)
</script>
